import { NS } from 'Bitburner';
import { backdoor } from '/lib/Backdoor';
import { config } from '/lib/Config';

export async function main(ns: NS) {
  let target = 'faction';

  if (ns.args.length === 1) {
    target = ns.args[0].toString();
  }

  let backdoorServers = [target];

  if (target === 'faction') {
    backdoorServers = config('factions.servers');
  }
  ns.tail();
  for (let i = 0; i < backdoorServers.length; i++) {
    ns.print(`Attempting to penetrate ${backdoorServers[i]}`);
    await backdoor(ns, backdoorServers[i]);
  }
}
